# 🧠 抑郁量表得分预测应用使用说明

## 📋 应用概述

这是一个基于机器学习的抑郁量表得分预测应用，可以根据四个心理量表得分预测抑郁程度。

## 🚀 快速启动

### 方法1：直接启动
```bash
streamlit run streamlit_app.py --server.port 8501
```

### 方法2：使用稳定启动脚本（推荐）
```bash
python start_app_stable.py
```

启动后访问：http://localhost:8501

## 📊 功能特性

### 1. **多模型预测**
- ✅ **XGBoost**: 梯度提升树（推荐）
- ✅ **LightGBM**: 轻量级梯度提升
- ✅ **KNN**: K近邻算法
- ✅ **LinearRegression**: 线性回归
- ✅ **Ridge**: 岭回归

### 2. **输入参数**
- **亲子量表得分**: 8-50分
- **韧性量表得分**: 0-40分  
- **焦虑量表得分**: 0-20分
- **手机使用时间得分**: 0-60分

### 3. **预测结果**
- **预测概率**: 抑郁风险百分比
- **原始得分**: 0-27分抑郁量表得分
- **置信区间**: 95%置信区间
- **风险等级**: 低/中/高风险分类

### 4. **可视化分析**
- **SHAP分析图**: 特征重要性解释
- **力图展示**: 各特征对预测结果的贡献

## 🎯 风险等级判断

| 得分范围 | 风险等级 | 建议 |
|---------|---------|------|
| ≤ 7分   | 低风险   | 继续保持良好心理状态 |
| 8-14分  | 中风险   | 建议关注心理健康 |
| > 14分  | 高风险   | 建议寻求专业帮助 |

## 🛠️ 技术架构

- **前端**: Streamlit Web应用
- **后端**: Python机器学习模型
- **可视化**: SHAP + Matplotlib
- **模型**: 5个已训练的ML模型

## ⚠️ 重要提醒

1. **仅供参考**: 预测结果仅供参考，不能替代专业医学诊断
2. **数据隐私**: 输入数据仅在本地处理，不会上传到服务器
3. **专业建议**: 如有心理健康问题，请咨询专业心理医生

## 🔧 故障排除

### 常见问题

**Q: 应用无法启动？**
A: 检查依赖包是否完整安装：
```bash
pip install streamlit pandas numpy scikit-learn matplotlib shap
```

**Q: 模型加载失败？**
A: 运行模型测试：
```bash
python test_models.py
```

**Q: 预测结果异常？**
A: 
- 检查输入数据是否在合理范围内
- 尝试更换其他模型
- 查看控制台错误信息

**Q: SHAP图表不显示？**
A: 
- 部分模型可能不支持SHAP分析
- 尝试使用XGBoost或LightGBM模型

## 📈 模型性能

经过测试的可用模型：
- ✅ XGBoost: 预测稳定性高
- ✅ LightGBM: 速度快，效果好
- ✅ KNN: 简单可靠
- ✅ LinearRegression: 基础线性模型
- ✅ Ridge: 正则化线性模型

## 📞 技术支持

如遇到技术问题，请：
1. 检查控制台错误信息
2. 运行`python test_models.py`测试模型
3. 确认所有依赖包已正确安装

---

*最后更新: 2024年12月* 